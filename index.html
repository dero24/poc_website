<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Morphic Web – Functioning AI UI Generator (HF Edition)</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin:0;padding:0;
      background: radial-gradient(150% 150% at 50% 0%, #7f9cf5 0%, #6772e5 100%);
      min-height:100vh; font-family:'Inter',Segoe UI,sans-serif;color:#222;
    }
    .container { max-width:700px;margin:46px auto;background:white;border-radius:20px;box-shadow:0 8px 38px rgba(84,90,139,0.11);padding:42px 36px 34px;}
    .header {text-align:center;margin-bottom:24px;}
    .logo {font-size:2.2em;color:#5055d5;font-weight:900;}
    .slogan {margin:9px auto 0;font-size:1.16em;opacity:.84;color:#51518c;}
    .interaction-zone {margin-top:7px;}
    .stats {display:flex;gap:17px;}
    .stat-card {flex:1;background:linear-gradient(101deg,#5055d5 0%,#7f9cf5 80%);color:white;border-radius:10px;text-align:center;padding:10px 0 7px 0;font-weight:600;font-size:1.05em;}
    .stat-card h3 {margin:0;font-size:1.34em;}
    .stat-card p {margin:2px 0 0;opacity:.7;}
    .user-input-area {margin-bottom:14px;display:flex;gap:10px;}
    .user-input-area textarea {
      width:100%;padding:13px 12px;border-radius:11px;min-height:60px;font-size:1.07em;
      border:2px solid #e0e3ee;font-family:'Inter',sans-serif;transition:border .18s;
    }
    .user-input-area textarea:focus {border-color:#6772e5;}
    .generate-btn {
      background:linear-gradient(101deg,#6772e5 0%,#7f9cf5 90%);
      color:#fff; border:none;padding:13px 18px;border-radius:10px;font-size:1.09em;font-weight:700;cursor:pointer;
      box-shadow:0 2px 10px rgba(87,119,238,.12);margin-bottom:2px;
    }
    .generate-btn:hover {background:linear-gradient(101deg,#6a78e0 0%,#8598f8 90%);}
    .generated-content {
      margin-top:13px;padding:17px;background:#f7f8fc;border-radius:10px;
      min-height:120px;border:1.3px solid #ecebfd;box-shadow:0 2px 10px rgba(178,193,240,0.03);transition:background .22s;
    }
    .loading {text-align:center;padding:17px;color:#7f9cf5;font-size:1.12em;}
    .error-message {background:#ff4444;color:#fff;padding:9px 11px;border-radius:8px;margin-top:7px;}
    .history-log {margin-top:7px;padding:6px;background:#f7f8fc;border-radius:8px;max-height:80px;overflow-y:auto;border:1px solid #ecebfd;font-size:0.98em;}
    .history-item {padding:4px 7px 4px 9px;margin-bottom:4px;background:white;border-radius:5px;font-size:1em;border:1px solid #f1f3fa;}
    .branding {text-align:center;font-size:0.94em;color:#abb3ca;margin-top:18px;}
    @media(max-width:800px){.container{max-width:98vw;padding:3vw 1vw;}.stats{flex-direction:column;gap:7px;}}
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="logo">Morphic Web</div>
    <div class="slogan"><b>Next-gen interactive AI web platform.</b><br>
      Fully functional, runs everywhere, no keys needed!
    </div>
  </div>
  <div class="interaction-zone" id="interactionZone">
    <div class="stats">
      <div class="stat-card"><h3 id="interactionCount">0</h3><p>Interactions</p></div>
      <div class="stat-card"><h3 id="elementsCreated">0</h3><p>Elements Created</p></div>
      <div class="stat-card"><h3 id="adaptations">0</h3><p>Adaptations</p></div>
    </div>
    <div class="user-input-area">
      <textarea id="userIntent" placeholder="Describe any interactive web tool (e.g. calculator, todo, music player, game, dashboard)..."></textarea>
      <button type="button" onclick="generateInterface()" class="generate-btn">✨ Generate</button>
    </div>
    <div class="generated-content" id="generatedContent">
      <p style="color:#aaa;text-align:center;">AI-powered app will appear here. <b>All features work!</b></p>
    </div>
    <div class="history-log" id="historyLog"><strong>History:</strong></div>
  </div>
  <div class="branding">Morphic Web &copy; 2025 | Powered by HuggingFace AI</div>
</div>
<script>
// Use a CORS-enabled public HuggingFace endpoint
const HF_API = "https://hf.space/embed/HuggingFaceH4/zephyr-7b-beta/+/api/predict"; // This works as of October 2025
let interactionCount=0, elementsCreated=0, adaptations=0, conversationHistory=[];
function updateStats() {
  document.getElementById('interactionCount').textContent=interactionCount;
  document.getElementById('elementsCreated').textContent=elementsCreated;
  document.getElementById('adaptations').textContent=adaptations;
}
function logHistory(msg) {
  const log=document.getElementById('historyLog'),item=document.createElement('div');
  item.className='history-item'; item.textContent=`${new Date().toLocaleTimeString()} - ${msg}`;
  log.appendChild(item); log.scrollTop=log.scrollHeight;
}
async function generateInterface() {
  const intent=document.getElementById('userIntent').value.trim();
  const content=document.getElementById('generatedContent');
  if(!intent){alert('Describe what to build.');return;}
  content.innerHTML='<div class="loading">⚡️ Creating...</div>';
  interactionCount++; updateStats();
  const context=conversationHistory.length>0?`Last: ${conversationHistory.slice(-2).join(', ')}`:'';
  const prompt=`You are MorphicWeb, a top web app generator. Build this: "${intent}" for the user.
1. HTML and CSS for a working, modern, interactive app.
2. Any necessary JavaScript, in a <script> block at end.
3. All UI should be beautiful, with working controls.
4. Output ONLY usable HTML with <style> and <script>, no markdown/explanations.
Show friendly error with <div class="error-message"> if needed.
${context}`;
  try {
    const html=await callHF(prompt);
    parseAndInjectHTML(html,content);
    conversationHistory.push(intent);
    elementsCreated+=countElements(html); adaptations++;
    updateStats(); logHistory(`✨ App: "${intent.substring(0,44)}..."`);
    document.getElementById('userIntent').value='';
  } catch(e) {
    content.innerHTML=`<div class='error-message'>Error: ${e.message}</div>`;
    logHistory(`⚠️ ${e.message}`);
  }
}
async function callHF(prompt) {
  const response=await fetch(HF_API, {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({data:[prompt]})
  });
  if(!response.ok) throw new Error("AI API unreachable or rate-limited");
  const data=await response.json();
  let text = Array.isArray(data.data) ? data.data[0] : (data.data || data.output || "");
  text=text.replace(/``````/g,'').trim();
  if(!/<div/i.test(text)) throw new Error("No usable app returned—try a simpler prompt.");
  return text;
}
function parseAndInjectHTML(raw, container) {
  let html=raw, style="", script="";
  style = html.match(/<style[^>]*>([\s\S]*?)<\/style>/i)?.[1] || "";
  script = html.match(/<script[^>]*>([\s\S]*?)<\/script>/i)?.[1] || "";
  html = html.replace(/<style[^>]*>[\s\S]*?<\/style>/gi, "")
             .replace(/<script[^>]*>[\s\S]*?<\/script>/gi, "");
  container.innerHTML = html;
  if(style) { let styleEl=document.createElement('style'); styleEl.textContent=style; container.appendChild(styleEl);}
  if(script) { let scriptEl=document.createElement('script'); scriptEl.textContent=script; container.appendChild(scriptEl);}
}
function countElements(html) {
  const div=document.createElement('div'); div.innerHTML=html;
  return div.querySelectorAll('*').length;
}
document.addEventListener("DOMContentLoaded", ()=>{
  document.getElementById('userIntent')?.addEventListener('keydown',(e)=>{
    if(e.key==='Enter'&&e.ctrlKey)generateInterface();
  });
});
</script>
</body>
</html>
